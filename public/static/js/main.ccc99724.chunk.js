(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{220:function(e,t,n){e.exports=n(410)},225:function(e,t,n){},226:function(e,t,n){},249:function(e,t,n){},284:function(e,t,n){},292:function(e,t,n){},297:function(e,t,n){},410:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return q}));var a=n(187),r=n(188),c=n(218),l=n(214),i=n(0),o=n.n(i),u=n(19),s=n.n(u),d=n(54),m=n(34);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(225),n(226);var p=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"title"}," \u6b22\u58f0\u4e60\u8bed"),o.a.createElement("button",{className:"start"},o.a.createElement(d.b,{style:{color:"red",textDecoration:"none"},to:"/menu"},"\u5f00\u59cb")))},f=n(41),g=n(62),h=n.n(g),b=n(414),y=n(422);n(249);var E=function(){var e=Object(i.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1];Object(i.useEffect)((function(){r()}),[]);var r=function(){h()({method:"get",url:"/api/content/queryContentPage",data:{pageNo:1,pageSize:1e3},headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then((function(e){if(e&&200===e.data.status){var t=e.data.data.list;a(t.map((function(e){return{title:e.title,id:e.id}})))}else i.message.error(e&&e.data.msg)}))};return console.log("menuData :>> ",n),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(b.a,{orientation:"left"},"\u4e60\u8bed\u5217\u8868"),o.a.createElement(y.b,{bordered:!0,dataSource:n,renderItem:function(e){return o.a.createElement(y.b.Item,null,o.a.createElement(y.b.Item.Meta,{title:o.a.createElement(d.b,{style:{textDecoration:"none"},to:"/detail?id=".concat(e.id)},e.title)}))}})))},v=n(423),x=n(39);n(284);var w=function(){var e=Object(i.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1];Object(i.useEffect)((function(){var e=function(e){for(var t=decodeURI(window.location.search.substring(1)).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if(a[0]===e)return a[1]}return null}("id");r(e)}),[]);var r=function(e){h()({method:"get",url:"/api/content/queryContentPage",data:{pageNo:1,pageSize:100},headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then((function(t){if(t&&200===t.data.status){var n=t.data.data.list;a(n.find((function(t){return t.id===1*e})))}else v.b.error(t&&t.data.msg)}))};return console.log("detailData :>> ",n),o.a.createElement("div",null,o.a.createElement("div",{className:"detail"},o.a.createElement("p",{className:"text"},n.content),o.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},o.a.createElement("audio",{className:"audio",src:"/api/file/getContentFile?fileName=".concat(n.acc),autoplay:"autoplay",controls:"controls"})),o.a.createElement("div",{style:{textAlign:"center",marginTop:"10px"}},o.a.createElement(x.a,{type:"primary"},o.a.createElement(d.b,{to:"/recording"},"\u6211\u6709\u4f53\u4f1a\uff0c\u8981\u5f55\u97f3"))," \xa0\xa0\xa0\xa0",o.a.createElement(x.a,{type:"primary"},o.a.createElement(d.b,{to:"menu"},"\u610f\u672a\u5c3d\uff0c\u7ee7\u7eed\u542c")))))},O=n(194),j=n.n(O),k=n(420);n(292);var C=function(){var e=Object(i.useRef)(null),t=Object(i.useRef)(null),n=Object(i.useRef)(null),a=Object(i.useRef)(null),r=Object(i.useRef)(null),c=Object(i.useRef)(null),l=Object(i.useRef)(null),u=Object(i.useState)({}),s=Object(f.a)(u,2),m=s[0],p=s[1],g=Object(i.useState)(""),b=Object(f.a)(g,2),y=b[0],E=b[1],x=Object(i.useState)(!1),w=Object(f.a)(x,2),O=w[0],C=w[1],S=Object(i.useState)(""),A=Object(f.a)(S,2),N=A[0],T=A[1],R=Object(i.useState)(""),F=Object(f.a)(R,2),P=F[0],_=F[1],I=Object(i.useState)(!1),D=Object(f.a)(I,2),z=D[0],B=D[1],q=Object(i.useState)(!1),W=Object(f.a)(q,2),M=W[0],L=W[1];Object(i.useEffect)((function(){U(),c.current=document.getElementById("canvasRecording"),a.current=c.current.getContext("2d"),l.current=document.getElementById("canvasPlay"),r.current=l.current.getContext("2d")}),[]);var U=function(){var t=new j.a({sampleBits:16,sampleRate:48e3,numChannels:1});e.current=t,t.onprogress=function(e){p(e)}},J=function t(){if(m.duration){n.current=requestAnimationFrame(t);var a=e.current.getPlayAnalyseData(),c=a.length;r.current.fillStyle="rgb(200, 200, 0)",r.current.fillRect(0,0,l.current.width,l.current.height),r.current.lineWidth=3,r.current.strokeStyle="rgb(255, 0, 0)",r.current.beginPath();for(var i=1*l.current.width/c,o=0,u=0;u<c;u++){var s=a[u]/128*l.current.height/2;0===u?r.current.moveTo(o,s):r.current.lineTo(o,s),o+=i}r.current.lineTo(l.current.width,l.current.height/2),r.current.stroke()}},K=function(){var t=e.current.getWAVBlob(),n=new window.File([t],Math.floor(1e7*Math.random()),{type:t.type}),a=new FormData;a.append("file",n),a.append("userName",N),a.append("mail",P),h()({method:"post",url:"/api/uploadTape/sendMail",data:a,headers:{"Content-Type":"multipart/form-data"},timeout:1e5}).then((function(e){e&&200===e.data.status?(C(!1),v.b.success("\u53d1\u9001\u6210\u529f")):v.b.warning(e.data.msg)}))};return o.a.createElement("div",{className:"App"},o.a.createElement("div",{style:{marginTop:"130px",textAlign:"center"}},o.a.createElement("button",{className:"recording_button",onClick:function(){e.current||U(),e.current.start().then((function(){E("record"),function n(){t.current=requestAnimationFrame(n);var r=e.current.getRecordAnalyseData(),l=r.length;a.current.fillStyle="rgb(200, 200, 0)",a.current.fillRect(0,0,c.current.width,c.current.height),a.current.lineWidth=3,a.current.strokeStyle="rgb(255, 0, 0)",a.current.beginPath();for(var i=1*c.current.width/l,o=0,u=0;u<l;u++){var s=r[u]/128*c.current.height/2;0===u?a.current.moveTo(o,s):a.current.lineTo(o,s),o+=i}a.current.lineTo(c.current.width,c.current.height/2),a.current.stroke()}()}),(function(e){console.log("".concat(e.name," : ").concat(e.message))}))}},"\u5f00\u59cb\u5f55\u97f3"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&e.current.pause()}},"\u6682\u505c"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&e.current.resume()}},"\u7ee7\u7eed"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&(e.current.stop(),t.current&&cancelAnimationFrame(t.current),t.current=null)}},"\u7ed3\u675f\u5f55\u97f3"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&e.current.destroy().then((function(){e.current=null,t.current&&cancelAnimationFrame(t.current),n.current&&cancelAnimationFrame(n.current),p({}),t.current=null,n.current=null}))}}," \u653e\u5f03\u91cd\u5f55"),o.a.createElement("button",{className:"recording_button"},o.a.createElement(d.b,{style:{color:"red",textDecoration:"none"},to:"/menu"},"\u7ee7\u7eed\u8046\u542c"))),o.a.createElement("div",{style:{padding:"20px 10px"}},o.a.createElement("div",{style:{width:"25%",height:"150px",verticalAlign:"middle",display:"inline-block",color:"#ff0",textAlign:"center"}},o.a.createElement("h1",{style:{color:"#ff0",fontSize:"40px"}},m.duration&&m.duration.toFixed(3)||0),o.a.createElement("h5",{style:{color:"#ff0",fontSize:"16px"}},"\u5f55\u97f3\u65f6\u957f\uff08\u79d2\uff09")),o.a.createElement("div",{style:{width:"25%",display:"inline-block",height:"150px",verticalAlign:"middle",color:"#ff0",textAlign:"center"}},o.a.createElement("h1",{style:{color:"#ff0",fontSize:"40px"}},m.vol&&m.vol&&m.vol.toFixed(2)||0),o.a.createElement("h5",{style:{color:"#ff0",fontSize:"16px"}},"\u5f53\u524d\u5f55\u97f3\u97f3\u91cf\u767e\u5206\u6bd4(%)\uff09")),o.a.createElement("div",{style:{width:"25%",display:"inline-block",height:"150px",verticalAlign:"middle",color:"#ff0",textAlign:"center"}},o.a.createElement("canvas",{style:{display:"record"===y?"block":"none"},width:"300",height:"150",id:"canvasRecording"}),o.a.createElement("canvas",{style:{display:"play"===y?"block":"none"},width:"300",height:"150",id:"canvasPlay"}))),o.a.createElement("div",{style:{marginTop:"10px",textAlign:"center"}},o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&(e.current.play(),E("play"),J())}},"\u64ad\u653e"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&e.current.pausePlay()}},"\u6682\u505c"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&(e.current.resumePlay(),J())}},"\u7ee7\u7eed"),o.a.createElement("button",{className:"recording_button",onClick:function(){e.current&&e.current.stopPlay()}}," \u7ed3\u675f"),o.a.createElement("button",{className:"recording_button",onClick:function(){return C(!0)}}," \u53d1\u9001\u90ae\u4ef6")),O?o.a.createElement("div",{style:{marginTop:"20px",textAlign:"center"}},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"inline-block",width:"80px",textAlign:"right",marginRight:"10px",color:"#ff0"}},"\u59d3\u540d:"),o.a.createElement("div",{style:{display:"inline-block",width:"180px",height:"25px"}},o.a.createElement(k.a,{style:{width:"100%",height:"100%"},onChange:function(e){T(e.target.value),B(!1)}}))),z?o.a.createElement("div",{style:{width:"100%",marginTop:"10px",textAlign:"center",color:"#ff0"}},"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"):null,o.a.createElement("div",{style:{marginTop:z?0:"32px"}},o.a.createElement("div",{style:{display:"inline-block",width:"80px",textAlign:"right",marginRight:"10px",color:"#ff0"}},"\u90ae\u7bb1:"),o.a.createElement("div",{style:{display:"inline-block",width:"180px",height:"25px"}},o.a.createElement(k.a,{style:{width:"100%",height:"100%"},onChange:function(e){_(e.target.value),L(!1)}}))),M?o.a.createElement("div",{style:{width:"100%",marginTop:"10px",textAlign:"center",color:"#ff0"}},"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"):null,o.a.createElement("div",{style:{marginTop:M?0:"32px"}},o.a.createElement("button",{className:"send",onClick:function(){return K()}}," \u53d1\u9001"))):null)},S=n(119),A=n(145),N=n(215),T=n(415),R=n(416),F=n(417),P=n(419),_=n(418),I=(n(297),n(205)),D=n.n(I),z=n(421);var B=function(){var e=Object(i.useState)([]),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(!1),c=Object(f.a)(r,2),l=c[0],u=c[1],s=Object(i.useState)({}),d=Object(f.a)(s,2),m=d[0],p=d[1],g=Object(i.useState)([]),b=Object(f.a)(g,2),y=b[0],E=b[1];Object(i.useEffect)((function(){w()}),[]);var w=function(){h()({method:"get",url:"/api/content/queryContentPage",data:{pageNo:1,pageSize:100},headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then((function(e){e&&200===e.data.status?a(e.data.data.list):v.b.error(e&&e.data.msg)}))},O={onRemove:function(e){E((function(){var t=y.indexOf(e),n=y.slice();return n.splice(t,1),console.log("newFileList :>> ",n),n}))},beforeUpload:function(e){return E((function(){return[].concat(Object(N.a)(y),[e])})),!1},fileList:y},j=function(e,t){p(Object(A.a)(Object(A.a)({},m),{},Object(S.a)({},e,t)))},C=[{title:"\u6807\u9898",dataIndex:"title",key:"title",width:300},{title:"\u5185\u5bb9",dataIndex:"content",key:"content",width:600,render:function(e,t){}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"id",render:function(e,t){return o.a.createElement("span",null,o.a.createElement(x.a,{type:"primary",onClick:function(){return function(e){var t=e.title,n=e.content,a=e.id;console.log("content :>> ",n),u(!0),p({title:t,content:n,id:a})}(t)}}," \u4fee\u6539")," \xa0\xa0",o.a.createElement(x.a,{type:"primary",onClick:function(){return e=t.id,void h()({method:"get",url:"/api/content/deleteContent",params:{id:e}}).then((function(e){e&&200===e.data.status&&(v.b.success("\u5220\u9664\u6210\u529f"),w())}));var e}}," \u5220\u9664"))}}];return o.a.createElement("div",{style:{padding:"20px 30px"}},o.a.createElement(T.a,null,o.a.createElement(R.a,{span:1},o.a.createElement(x.a,{type:"primary",onClick:function(){return u(!0),void p({})}},"\u65b0\u589e"))),o.a.createElement("br",null),o.a.createElement(T.a,null,o.a.createElement(R.a,{span:24},o.a.createElement(F.a,{rowKey:"id",dataSource:n,columns:C}))),o.a.createElement(P.a,{width:600,title:"\u7f16\u8f91",visible:l,onOk:function(){if(m.title||m.id)if(m.content||m.id)if(y.length||m.id){var e=new FormData;e.append("title",m.title),e.append("content",m.content),y.length&&(console.log("fileList11111",y),e.append("file",y[0])),m.id&&e.append("id",m.id);var t="/api/content/addContent";m.id&&(t="/api/content/updateContent"),h()({method:"post",url:t,data:e,headers:{"Content-Type":"multipart/form-data"},timeout:1e4}).then((function(e){e&&200===e.data.status?(m.id?v.b.success("\u4fee\u6539\u6210\u529f"):v.b.success("\u6dfb\u52a0\u6210\u529f"),u(!1),p({}),E([]),w()):v.b.error(e&&e.data.msg)}))}else v.b.warning("\u9009\u62e9\u6587\u4ef6");else v.b.warning("\u8bf7\u586b\u5199\u6587\u672c\u5185\u5bb9");else v.b.warning("\u8bf7\u586b\u5199\u6807\u9898")},onCancel:function(){u(!1),p({})}},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"inline-block",width:"80px"}},"\u6807\u9898:"),o.a.createElement("div",{style:{display:"inline-block",width:"420px",height:"25px"}},o.a.createElement(k.a,{style:{width:"100%",height:"100%"},value:m.title,onChange:function(e){j("title",e.target.value)}}))),o.a.createElement("div",{style:{marginTop:"10px"}},o.a.createElement("div",{style:{display:"inline-block",width:"80px"}},"\u5185\u5bb9:"),o.a.createElement("div",{style:{display:"inline-block",width:"420px"}},o.a.createElement(D.a,{autoSize:{minRows:10,maxRows:18},style:{width:"100%",height:"100%"},value:m.content,onChange:function(e){j("content",e.target.value)}}))),o.a.createElement("div",{style:{marginTop:"10px"}},o.a.createElement("div",{style:{display:"inline-block",width:"80px"}},"\u6587\u4ef6:"),o.a.createElement("div",{style:{display:"inline-block",width:"420px"}},o.a.createElement(_.a,O,o.a.createElement(x.a,{icon:o.a.createElement(z.a,null)},"Click to Upload")))))))},q=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(m.a,{exact:!0,path:"/",component:p}),o.a.createElement(m.a,{exact:!0,path:"/menu",component:E}),o.a.createElement(m.a,{exact:!0,path:"/detail",component:w}),o.a.createElement(m.a,{exact:!0,path:"/recording",component:C}),o.a.createElement(m.a,{exact:!0,path:"/editPage",component:B}))}}]),n}(i.Component);s.a.render(o.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[220,1,2]]]);
//# sourceMappingURL=main.ccc99724.chunk.js.map